<h1 id="btrfs-filesystem">btrfs filesystem</h1>

<p>管理 btrfs 文件系统。
更多信息：<a href="https://btrfs.readthedocs.io/en/latest/btrfs-filesystem.html">https://btrfs.readthedocs.io/en/latest/btrfs-filesystem.html</a>.</p>

<ul>
  <li>显示文件系统使用情况（可以选择以 root 身份运行以显示详细信息）：</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">btrfs filesystem usage </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">指向挂载点的路径</span></p>

<ul>
  <li>显示各个设备的使用情况：</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo btrfs filesystem show </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">指向挂载点的路径</span></p>

<ul>
  <li>对 btrfs 文件系统上的单个文件进行碎片整理（避免在运行数据去重的同时运行）：</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo btrfs filesystem defragment -v </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">指向文件的路径</span></p>

<ul>
  <li>递归对目录进行碎片整理（不跨越子卷边界）：</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo btrfs filesystem defragment -v -r </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">指向目录的路径</span></p>

<ul>
  <li>强制将未写入的数据块同步到磁盘：</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo btrfs filesystem sync </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">指向挂载点的路径</span></p>

<ul>
  <li>递归总结目录中文件的磁盘使用情况：</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo btrfs filesystem du --summarize </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">指向目录的路径</span></p>
