<h1 id="bpftrace">bpftrace</h1>

<p>Linux eBPF 的高级跟踪语言。
更多信息：<a href="https://github.com/iovisor/bpftrace">https://github.com/iovisor/bpftrace</a>.</p>

<ul>
  <li>显示 bpftrace 版本：</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">bpftrace -V</code></p>

<ul>
  <li>列出所有可用的探针：</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo bpftrace -l</code></p>

<ul>
  <li>运行单行程序（例如按程序进行系统调用计数）：</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo bpftrace -e '</code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">tracepoint:raw_syscalls:sys_enter { @[comm] = count(); }</span><code class="language-plaintext highlighter-rouge">'</code></p>

<ul>
  <li>从文件运行程序：</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo bpftrace </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">文件</span></p>

<ul>
  <li>通过 PID 跟踪程序：</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo bpftrace -e '</code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">tracepoint:raw_syscalls:sys_enter /pid == 123/ { @[comm] = count(); }</span><code class="language-plaintext highlighter-rouge">'</code></p>

<ul>
  <li>进行试运行并以 eBPF 格式显示输出：</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo bpftrace -d -e '</code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">单行程序</span><code class="language-plaintext highlighter-rouge">'</code></p>
