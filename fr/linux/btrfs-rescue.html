<h1 id="btrfs-rescue">btrfs rescue</h1>

<p>Essayer de récupérer un système de fichiers btrfs endommagé.
Plus d'informations : <a href="https://btrfs.readthedocs.io/en/latest/btrfs-rescue.html">https://btrfs.readthedocs.io/en/latest/btrfs-rescue.html</a>.</p>

<ul>
  <li>Reconstruire les méta-données du système de fichiers (très lent) :</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo btrfs rescue chunk-recover </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">chemin/vers/partition</span></p>

<ul>
  <li>Corriger les problèmes d'alignement de taille de périphérique (e.g. incohérence entre la taille du système de fichiers et le nombre total d'octets empéchant de monter la partition) :</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo btrfs rescue fix-device-size </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">chemin/vers/partition</span></p>

<ul>
  <li>Restaurer un superbloc corrompu depuis ses copies correctes (restauration de la racine de l'arbre du système de fichiers) :</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo btrfs rescue super-recover </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">chemin/vers/partition</span></p>

<ul>
  <li>Restaurer depuis des transactions interrompues (correction des problèmes de re-exécution des messages de journaux) :</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo btrfs rescue zero-log </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">chemin/vers/partition</span></p>

<ul>
  <li>Créer un périphérique de contrôle sous <code class="language-plaintext highlighter-rouge">/dev/btrfs-control</code> quand l'outil <code class="language-plaintext highlighter-rouge">mknod</code> n'est pas installé :</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo btrfs rescue create-control-device</code></p>
