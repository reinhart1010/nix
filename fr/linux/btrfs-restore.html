<h1 id="btrfs-restore">btrfs restore</h1>

<p>Tenter de récupérer des fichiers depuis un système de fichiers btrfs endommagé.
Plus d'informations : <a href="https://btrfs.readthedocs.io/en/latest/btrfs-restore.html">https://btrfs.readthedocs.io/en/latest/btrfs-restore.html</a>.</p>

<ul>
  <li>Restaurer tout les fichiers depuis un système de fichier btrfs vers un répertoire cible indiqué :</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo btrfs restore </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">chemin/vers/peripherique_btrfs</span><code class="language-plaintext highlighter-rouge"> </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">chemin/vers/dossier</span></p>

<ul>
  <li>Lister (sans écriture) les fichiers qui peuvent être récupérés depuis un système de fichiers btrfs :</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo btrfs restore --dry-run </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">chemin/du/device/btrfs</span><code class="language-plaintext highlighter-rouge"> </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">chemin/du/dossier</span></p>

<ul>
  <li>Restaurer les fichiers correspondants à une expression régulière donnée (non sensible à la casse) à restaurer depuis un système de fichiers btrfs (tous les répertoires parents des fichiers doivent correspondre également à l'expression régulière) :</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo btrfs restore --path-regex </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">expression_reguliere</span><code class="language-plaintext highlighter-rouge"> -c </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">chemin/vers/peripherique_btrfs</span><code class="language-plaintext highlighter-rouge"> </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">chemin/vers/dossier</span></p>

<ul>
  <li>Restaurer les fichiers depuis un système de fichiers btrfs en utilisant un arbre racine spécifique <code class="language-plaintext highlighter-rouge">bytenr</code> (voir <code class="language-plaintext highlighter-rouge">btrfs-find-root</code>) :</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo btrfs restore -t </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">bytenr</span><code class="language-plaintext highlighter-rouge"> </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">chemin/vers/peripherique_btrfs</span><code class="language-plaintext highlighter-rouge"> </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">chemin/vers/dossier</span></p>

<ul>
  <li>Restaurer les fichiers depuis un système de fichiers btrfs (avec métadonnées, attributs étendus, et liens symboliques) en écrivant par dessus les fichiers déjà existants dans le répertoire cible :</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo btrfs restore --metadata --xattr --symlinks --overwrite </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">chemin/vers/peripherique_btrfs</span><code class="language-plaintext highlighter-rouge"> </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">chemin/vers/dossier</span></p>
