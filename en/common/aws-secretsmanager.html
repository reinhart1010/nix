<h1 id="aws-secretsmanager">aws secretsmanager</h1>

<p>Store, manage, and retrieve secrets.
More information: <a href="https://docs.aws.amazon.com/cli/latest/reference/secretsmanager/">https://docs.aws.amazon.com/cli/latest/reference/secretsmanager/</a>.</p>

<ul>
  <li>Show secrets stored by the secrets manager in the current account:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">aws secretsmanager list-secrets</code></p>

<ul>
  <li>List all secrets but only show the secret names and ARNs (easy to view):</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">aws secretsmanager list-secrets --query 'SecretList[*].{Name: Name, ARN: ARN}'</code></p>

<ul>
  <li>Create a secret:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">aws secretsmanager create-secret --name </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">name</span><code class="language-plaintext highlighter-rouge"> --description "</code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">secret_description</span><code class="language-plaintext highlighter-rouge">" --secret-string '</code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">secret</span><code class="language-plaintext highlighter-rouge">'</code></p>

<ul>
  <li>Delete a secret (append <code class="language-plaintext highlighter-rouge">--force-delete-without-recovery</code> to delete immediately without any recovery period):</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">aws secretsmanager delete-secret --secret-id </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">name|arn</span></p>

<ul>
  <li>View details of a secret except for secret text:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">aws secretsmanager describe-secret --secret-id </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">name|arn</span></p>

<ul>
  <li>Retrieve the value of a secret (to get the latest version of the secret omit <code class="language-plaintext highlighter-rouge">--version-stage</code>):</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">aws secretsmanager get-secret-value --secret-id </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">name|arn</span><code class="language-plaintext highlighter-rouge"> --version-stage </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">version_of_secret</span></p>

<ul>
  <li>Rotate the secret immediately using a Lambda function:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">aws secretsmanager rotate-secret --secret-id </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">name|arn</span><code class="language-plaintext highlighter-rouge"> --rotation-lambda-arn </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">arn_of_lambda_function</span></p>

<ul>
  <li>Rotate the secret automatically every 30 days using a Lambda function:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">aws secretsmanager rotate-secret --secret-id </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">name|arn</span><code class="language-plaintext highlighter-rouge"> --rotation-lambda-arn </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">arn_of_lambda_function</span><code class="language-plaintext highlighter-rouge"> --rotation-rules AutomaticallyAfterDays=</code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">30</span></p>
