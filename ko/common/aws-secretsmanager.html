<h1 id="aws-secretsmanager">aws secretsmanager</h1>

<p>시크릿을 저장, 관리 및 검색.
더 많은 정보: <a href="https://docs.aws.amazon.com/cli/latest/reference/secretsmanager/">https://docs.aws.amazon.com/cli/latest/reference/secretsmanager/</a>.</p>

<ul>
  <li>현재 계정에 저장된 시크릿 표시:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">aws secretsmanager list-secrets</code></p>

<ul>
  <li>모든 시크릿 표시 (시크릿 이름 및 ARN만 표시, 보기 쉬움):</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">aws secretsmanager list-secrets --query 'SecretList[*].{Name: Name, ARN: ARN}'</code></p>

<ul>
  <li>시크릿 생성:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">aws secretsmanager create-secret --name </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">이름</span><code class="language-plaintext highlighter-rouge"> --description "</code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">시크릿_설명</span><code class="language-plaintext highlighter-rouge">" --secret-string '</code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">시크릿</span><code class="language-plaintext highlighter-rouge">'</code></p>

<ul>
  <li>시크릿 삭제 (복구 없이 즉시 삭제하려면 <code class="language-plaintext highlighter-rouge">--force-delete-without-recovery</code> 추가):</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">aws secretsmanager delete-secret --secret-id </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">이름|arn</span></p>

<ul>
  <li>시크릿 세부 정보 표시 (시크릿 텍스트 제외):</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">aws secretsmanager describe-secret --secret-id </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">이름|arn</span></p>

<ul>
  <li>시크릿 값 검색 (최신 버전의 시크릿을 얻으려면 <code class="language-plaintext highlighter-rouge">--version-stage</code> 생략):</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">aws secretsmanager get-secret-value --secret-id </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">이름|arn</span><code class="language-plaintext highlighter-rouge"> --version-stage </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">시크릿_버전</span></p>

<ul>
  <li>즉시 시크릿 교체을 위해 람다 함수 사용:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">aws secretsmanager rotate-secret --secret-id </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">이름|arn</span><code class="language-plaintext highlighter-rouge"> --rotation-lambda-arn </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">람다_함수_arn</span></p>

<ul>
  <li>30일마다 자동으로 시크릿 교체을 위해 람다 함수 사용:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">aws secretsmanager rotate-secret --secret-id </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">이름|arn</span><code class="language-plaintext highlighter-rouge"> --rotation-lambda-arn </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">람다_함수_arn</span><code class="language-plaintext highlighter-rouge"> --rotation-rules AutomaticallyAfterDays=</code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">30</span></p>
