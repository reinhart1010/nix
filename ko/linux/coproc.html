<h1 id="coproc">coproc</h1>

<p>상호작용 비동기 하위 셸을 생성하기 위한 Bash 내장 명령어.
더 많은 정보: <a href="https://www.gnu.org/software/bash/manual/bash.html#Coprocesses">https://www.gnu.org/software/bash/manual/bash.html#Coprocesses</a>.</p>

<ul>
  <li>하위 셸을 비동기적으로 실행:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">coproc { </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">명령어1; 명령어2; …</span><code class="language-plaintext highlighter-rouge">; }</code></p>

<ul>
  <li>특정 이름으로 보조 프로세스 생성:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">coproc </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">이름</span><code class="language-plaintext highlighter-rouge"> { </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">명령어1; 명령어2; …</span><code class="language-plaintext highlighter-rouge">; }</code></p>

<ul>
  <li>특정 보조 프로세스의 <code class="language-plaintext highlighter-rouge">stdin</code>에 쓰기:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">echo "</code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">입력</span><code class="language-plaintext highlighter-rouge">" &gt;&amp;"$</code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">{이름</span><code class="language-plaintext highlighter-rouge">[1]}"</code></p>

<ul>
  <li>특정 보조 프로세스의 <code class="language-plaintext highlighter-rouge">stdout</code>에서 읽기:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">read </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">변수</span><code class="language-plaintext highlighter-rouge"> &lt;&amp;"$</code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">{이름</span><code class="language-plaintext highlighter-rouge">[0]}"</code></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">stdin</code>을 계속 읽고 입력에 대해 명령어를 실행하는 보조 프로세스 생성:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">coproc </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">이름</span><code class="language-plaintext highlighter-rouge"> { while read line; do </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">명령어1; 명령어2; …</span><code class="language-plaintext highlighter-rouge">; done }</code></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">stdin</code>을 계속 읽고 입력에 대해 파이프 라인을 실행하고 출력을 <code class="language-plaintext highlighter-rouge">stdout</code>에 쓰는 보조 프로세스 생성:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">coproc </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">이름</span><code class="language-plaintext highlighter-rouge"> { while read line; do echo "$line" | </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">명령어1 | 명령어2 | …</span><code class="language-plaintext highlighter-rouge"> | cat /dev/fd/0; done }</code></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">bc</code>를 실행하는 보조 프로세스를 생성하고 사용:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">coproc BC { bc --mathlib; }; echo "1/3" &gt;&amp;"${BC[1]}"; read output &lt;&amp;"${BC[0]}"; echo "$output"</code></p>
