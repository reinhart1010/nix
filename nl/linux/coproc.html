<h1 id="coproc">coproc</h1>

<p>Bash ingebouwd commando voor het maken van interactieve asynchrone subshells.
Meer informatie: <a href="https://www.gnu.org/software/bash/manual/bash.html#Coprocesses">https://www.gnu.org/software/bash/manual/bash.html#Coprocesses</a>.</p>

<ul>
  <li>Voer een subshell asynchroon uit:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">coproc { </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">commando1; commando2; …</span><code class="language-plaintext highlighter-rouge">; }</code></p>

<ul>
  <li>Maak een coprocess met een specifieke naam:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">coproc </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">naam</span><code class="language-plaintext highlighter-rouge"> { </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">commando1; commando2; …</span><code class="language-plaintext highlighter-rouge">; }</code></p>

<ul>
  <li>Schrijf naar de <code class="language-plaintext highlighter-rouge">stdin</code> van een specifiek coprocess:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">echo "</code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">invoer</span><code class="language-plaintext highlighter-rouge">" &gt;&amp;"$</code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">{naam</span><code class="language-plaintext highlighter-rouge">[1]}"</code></p>

<ul>
  <li>Lees van de <code class="language-plaintext highlighter-rouge">stdout</code> van een specifiek coprocess:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">read </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">variabele</span><code class="language-plaintext highlighter-rouge"> &lt;&amp;"$</code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">{naam</span><code class="language-plaintext highlighter-rouge">[0]}"</code></p>

<ul>
  <li>Maak een coprocess dat herhaaldelijk <code class="language-plaintext highlighter-rouge">stdin</code> leest en opdrachten op de invoer uitvoert:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">coproc </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">naam</span><code class="language-plaintext highlighter-rouge"> { while read line; do </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">commando1; commando2; …</span><code class="language-plaintext highlighter-rouge">; done }</code></p>

<ul>
  <li>Maak een coprocess dat herhaaldelijk <code class="language-plaintext highlighter-rouge">stdin</code> leest, een pipeline uitvoert op de invoer, en de uitvoer naar <code class="language-plaintext highlighter-rouge">stdout</code> schrijft:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">coproc </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">naam</span><code class="language-plaintext highlighter-rouge"> { while read line; do echo "$line" | </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">commando1 | commando2 | …</span><code class="language-plaintext highlighter-rouge"> | cat /dev/fd/0; done }</code></p>

<ul>
  <li>Maak en gebruik een coprocess dat <code class="language-plaintext highlighter-rouge">bc</code> uitvoert:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">coproc BC { bc --mathlib; }; echo "1/3" &gt;&amp;"${BC[1]}"; read output &lt;&amp;"${BC[0]}"; echo "$output"</code></p>
