<h1 id="iptables">iptables</h1>

<p>Configura tablas, cadenas y reglas del firewall IPv4 del kernel Linux.
Utiliza <code class="language-plaintext highlighter-rouge">ip6tables</code> para establecer reglas para el tráfico IPv6. Vea también: <code class="language-plaintext highlighter-rouge">iptables-save</code>, <code class="language-plaintext highlighter-rouge">iptables-restore</code>.
Más información: <a href="https://manned.org/iptables">https://manned.org/iptables</a>.</p>

<ul>
  <li>Muestra cadenas, reglas, contadores de paquetes/bytes y números de línea para la tabla de filtros (filter table):</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo iptables --verbose --numeric --list --line-numbers</code></p>

<ul>
  <li>Establece la [p]olítica de cadena de la regla :</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo iptables --policy </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">cadena</span><code class="language-plaintext highlighter-rouge"> </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">regla</span></p>

<ul>
  <li>[a]ñade una regla a la política de cadena para la IP:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo iptables --append </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">cadena</span><code class="language-plaintext highlighter-rouge"> --source </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">ip</span><code class="language-plaintext highlighter-rouge"> --jump </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">regla</span></p>

<ul>
  <li>[a]ñade una regla a la política de cadena para la IP teniendo en cuenta el [p]rotocolo y el puerto:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo iptables --append </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">cadena</span><code class="language-plaintext highlighter-rouge"> --source </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">ip</span><code class="language-plaintext highlighter-rouge"> --protocol </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">tcp|udp|icmp|…</span><code class="language-plaintext highlighter-rouge"> --dport </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">puerto</span><code class="language-plaintext highlighter-rouge"> --jump </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">regla</span></p>

<ul>
  <li>Agrega una regla NAT para traducir todo el tráfico desde la subred <code class="language-plaintext highlighter-rouge">192.168.0.0/24</code> a la IP pública del host:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo iptables --table </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">nat</span><code class="language-plaintext highlighter-rouge"> --append </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">POSTROUTING</span><code class="language-plaintext highlighter-rouge"> --source </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">192.168.0.0/24</span><code class="language-plaintext highlighter-rouge"> --jump </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">MASQUERADE</span></p>

<ul>
  <li>Borra la regla de la cadena:</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">sudo iptables --delete </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">cadena</span><code class="language-plaintext highlighter-rouge"> </code><span class="tldr-var badge badge-pill bg-dark-lm bg-white-dm text-white-lm text-dark-dm font-weight-bold">número_de_línea_de_regla</span></p>
